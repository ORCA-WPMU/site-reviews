!function(e,t,s){"use strict";var r=function(e,t){this.el=e,this.options=t,this.metadata=this.el.getAttribute("data-options"),this.stars=0,this.events={mousemove:this.move.bind(this)},this.init()};r.prototype={defaults:{clearable:!0,initialText:"Click to Rate",onClick:null,showText:!0},init:function(){if("SELECT"===this.el.tagName){for(var e=0;e<this.el.length;e++)if(""!==this.el[e].value){if(isNaN(parseFloat(this.el[e].value))||!isFinite(this.el[e].value))return;this.stars++}if(!(this.stars<1||this.stars>10)){this.config=this._extend({},this.defaults,this.options,this.metadata);var t=this.el.closest("form");return this.build(),this._on("change",this.el,this.change.bind(this)),this._on("mouseenter",this.wrap,this.enter.bind(this)),this._on("mouseleave",this.wrap,this.leave.bind(this)),this._on("click",this.wrap,this.select.bind(this)),t&&this._on("reset",this.el.closest("form"),this.clear.bind(this)),this.current=this.el.options[this.el.selectedIndex].value,this.selected=this.current,this.select(),this}}},build:function(){var e={},t={},s=this._createEl("span",{"class":"gl-star-rating","data-star-rating":""});this.el.parentNode.insertBefore(s,this.el),s.appendChild(this.el),this.wrap=this._insertAfterEl(this.el,"span",{"class":"gl-star-rating-stars"}),this.config.showText&&(this.text=this._insertAfterEl(this.wrap,"span",{"class":"gl-star-rating-text"}));for(var r=0;r<this.el.length;r++)""!==this.el[r].value&&(t[this.el[r].value]=this.el[r].text);Object.keys(t).sort().forEach(function(s){e[s]=t[s]});for(var i in e)this._appendTo(this.wrap,"span",{"data-value":i,"data-text":e[i]})},change:function(){this.show(this.el.options[this.el.selectedIndex].value)},clear:function(e){(this.config.clearable||e!==s)&&(this.el.value="",this.selected="",this.show(0))},enter:function(){var e=this.wrap.getBoundingClientRect();this._on("mousemove",this.wrap,this.events.mousemove),this.offsetLeft=e.left+t.body.scrollLeft},getIndexFromPosition:function(e){return this.star=Math.round(this.wrap.offsetWidth/this.stars),Math.min(Math.ceil(Math.max(e-this.offsetLeft,1)/this.star),this.stars)},leave:function(){this._off("mousemove",this.wrap,this.events.mousemove),this.show(this.selected)},move:function(e){this.show(this.getIndexFromPosition(e.pageX))},select:function(e){var t=this.current;return e!==s&&(t=this.getIndexFromPosition(e.pageX),""!==this.current&&parseFloat(this.selected)===t)?void this.clear():(this.el.value=t,this.selected=t,this.show(t),void(e!==s&&"function"==typeof this.config.onClick&&this.config.onClick(this.el)))},show:function(e){(e<0||""===e)&&(e=0),e>this.stars&&(e=this.stars),this._removeClass(this.wrap,"s"+10*this.current),this._addClass(this.wrap,"s"+10*e),this.config.showText&&(this.text.textContent=e<1?this.config.initialText:this.wrap.childNodes[e-1].dataset.text),this.current=e},_addClass:function(e,t){e.classList?e.classList.add(t):this._hasClass(e,t)||(e.className+=" "+t)},_appendTo:function(e,t,s){var r=this._createEl(t,s);e.innerHTML+=r.outerHTML},_createEl:function(e,s){var r="string"==typeof e?t.createElement(e):e;s=s||{};for(var i in s)r.setAttribute(i,s[i]);return r},_extend:function(){var e=[].slice.call(arguments),t=!1;"boolean"==typeof e[0]&&(t=e.shift());for(var s=e[0],r=e.slice(1),i=r.length,n=0;n<i;n++){var a=r[n];for(var o in a){var l=a[o];if(t&&l&&"object"==typeof l){var c=Array.isArray(l)?[]:{};s[o]=this._extend(!0,c,l)}else s[o]=l}}return s},_hasClass:function(e,t){return e.classList?e.classList.contains(t):new RegExp("\\b"+t+"\\b").test(e.className)},_insertAfterEl:function(e,t,s){var r=this._createEl(t,s);return e.parentNode.insertBefore(r,e.nextSibling),r},_off:function(e,t,s){t.detachEvent?t.detachEvent("on"+e,s):t.removeEventListener(e,s)},_on:function(e,t,s){t.attachEvent?t.attachEvent("on"+e,s):t.addEventListener(e,s)},_removeClass:function(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("\\b"+t+"\\b","g"),"")}},r.defaults=r.prototype.defaults,e.jQuery&&(jQuery.fn.starrating=function(e){return this.each(function(){jQuery.data(this,"plugin_starrating")||jQuery.data(this,"plugin_starrating",new r(this,e))})}),e.StarRating=r}(window,document),this.Element&&!function(e){e.matches=e.matches||e.matchesSelector||e.webkitMatchesSelector||e.msMatchesSelector||function(e){for(var t=this,s=(t.parentNode||t.document).querySelectorAll(e),r=-1;s[++r]&&s[r]!==t;);return!!s[r]},e.closest=e.closest||function(e){for(var t=this;t.matches&&!t.matches(e);)t=t.parentNode;return t.matches?t:null}}(Element.prototype);var GLSR={};GLSR.addClass=function(e,t){e.classList?e.classList.add(t):GLSR.hasClass(e,t)||(e.className+=" "+t)},GLSR.convertValue=function(e){if(GLSR.isNumeric(e))return parseFloat(e);if("true"===e)return!0;if("false"===e)return!1;if(""!==e&&null!==e)return e},GLSR.hasClass=function(e,t){return e.classList?e.classList.contains(t):new RegExp("\\b"+t+"\\b").test(e.className)},GLSR.inArray=function(e,t){for(var s=t.length;s--;)if(t[s]===e)return!0;return!1},GLSR.isNumeric=function(e){return!(isNaN(parseFloat(e))||!isFinite(e))},GLSR.on=function(e,t,s){[].forEach.call(document.querySelectorAll(t),function(t){t.attachEvent?t.attachEvent("on"+e,s):t.addEventListener(e,s)})},GLSR.off=function(e,t,s){[].forEach.call(document.querySelectorAll(t),function(t){t.detachEvent?t.detachEvent("on"+e,s):t.removeEventListener(e,s)})},GLSR.parseFormData=function(e,t){t=!!t||!1;for(var s=/[^\[\]]+/g,r={},i={},n=(function(e,s,r,a){var o=r.shift();if(a=a?a+"."+o:o,r.length)s[o]||(s[o]={}),n(e,s[o],r,a);else{var l=t?GLSR.convertValue(e.value):e.value;if(a in i&&"radio"!==e.type&&!s[o].isArray()?o in s?s[o]=[s[o]]:s[o]=[]:i[a]=!0,GLSR.inArray(e.type,["radio","checkbox"])&&!e.checked)return;s[o]?s[o].push(l):s[o]=l}}),a=0;a<e.length;a++){var o=e[a];if(o.name&&!o.disabled&&!GLSR.inArray(o.type,["file","reset","submit","button"])){var l=o.name.match(s);l.length||(l=[o.name]),n(o,r,l)}}return r},GLSR.postAjax=function(e,t,s){var r="string"!=typeof t?GLSR.serialize(t):t,i=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");return i.open("POST",e),i.onreadystatechange=function(){i.readyState>3&&200===i.status&&s(JSON.parse(i.responseText))},i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),i.send(r),i},GLSR.ready=function(e){"function"==typeof e&&("loading"!==document.readyState?e():document.addEventListener?document.addEventListener("DOMContentLoaded",e):document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&e()}))},GLSR.removeClass=function(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("\\b"+t+"\\b","g"),"")},GLSR.serialize=function(e,t){var s=[];for(var r in e)if(e.hasOwnProperty(r)){var i=t?t+"["+r+"]":r,n=e[r];s.push("object"==typeof n?GLSR.serialize(n,i):encodeURIComponent(i)+"="+encodeURIComponent(n))}return s.join("&")},GLSR.insertAfter=function(e,t,s){var r=GLSR.createEl(t,s);return e.parentNode.insertBefore(r,e.nextSibling),r},GLSR.appendTo=function(e,t,s){var r=GLSR.createEl(t,s);return e.appendChild(r),r},GLSR.createEl=function(e,t){var s="string"==typeof e?document.createElement(e):e;t=t||{};for(var r in t)t.hasOwnProperty(r)&&s.setAttribute(r,t[r]);return s},GLSR.clearFieldError=function(e){var t=e.closest(".glsr-field");if(null!==t){var s=t.querySelector(".glsr-field-errors");GLSR.removeClass(t,"glsr-has-error"),null!==s&&s.parentNode.removeChild(s)}},GLSR.clearFormErrors=function(e){for(var t=0;t<e.length;t++)GLSR.clearFieldError(e[t])},GLSR.showFormErrors=function(e,t){var s,r;for(var i in t)if(t.hasOwnProperty(i)){s=e.querySelector('[name="'+i+'"]').closest(".glsr-field"),r=s.querySelector(".glsr-field-errors"),GLSR.addClass(s,"glsr-has-error"),null===r&&(r=GLSR.appendTo(s,"span",{"class":"glsr-field-errors"}));for(var n=0;n<t[i].errors.length;n++)null!==t[i].errors[n]&&(r.innerHTML+='<span class="glsr-field-error">'+t[i].errors[n]+"</span>")}},GLSR.showFormMessage=function(e,t){var s=e.querySelector('input[name="form_id"]'),r=e.querySelector(".glsr-form-messages");null===r&&(r=GLSR.insertAfter(s,"div",{"class":"glsr-form-messages"})),t.errors?GLSR.addClass(r,"gslr-has-errors"):GLSR.removeClass(r,"gslr-has-errors"),r.innerHTML="<p>"+t.message+"</p>"},GLSR.submitForm=function(e){var t=e.querySelector('input[type="submit"]'),s={action:site_reviews.action,request:GLSR.parseFormData(e)};GLSR.postAjax(site_reviews.ajaxurl,s,function(s){GLSR.clearFormErrors(e),GLSR.showFormMessage(e,s),t.disabled&&t.removeAttribute("disabled"),s.errors?GLSR.showFormErrors(e,s.errors):e.reset()})},GLSR.on("change","form.glsr-submit-review-form",function(e){GLSR.clearFieldError(e.target)}),GLSR.on("submit","form.glsr-submit-review-form",function(e){e.preventDefault();var t=this.querySelector('input[type="submit"]');t.disabled||t.setAttribute("disabled",""),GLSR.submitForm(this)}),GLSR.ready(function(){for(var e=document.querySelectorAll("select.glsr-star-rating"),t=0;t<e.length;t++)new StarRating(e[t],{clearable:!1,showText:!1,onClick:GLSR.clearFieldError})});