!function(t,e,s){"use strict";var r=function(t,e){this.el=t,this.options=e,this.metadata=this.el.getAttribute("data-options"),this.stars=0,this.init()};r.prototype={defaults:{clearable:!0,initialText:"Click to Rate",onClick:null,showText:!0},init:function(){if("SELECT"===this.el.tagName){for(var t=0;t<this.el.length;t++)if(""!==this.el[t].value){if(isNaN(parseFloat(this.el[t].value))||!isFinite(this.el[t].value))return;this.stars++}if(!(this.stars<1||this.stars>10))return this.config=this._extend({},this.defaults,this.options,this.metadata),this.build(),this._on("change",this.el,this.change.bind(this)),this._on("mouseenter",this.wrap,this.enter.bind(this)),this._on("mouseleave",this.wrap,this.leave.bind(this)),this._on("click",this.wrap,this.select.bind(this)),this._on("reset",this.el.closest("form"),this.clear.bind(this)),this.current=this.el.options[this.el.selectedIndex].value,this.selected=this.current,this.width=this.wrap.offsetWidth,this.star=Math.round(this.width/this.stars),this.select(),this}},build:function(){var t={},e={},s=this._createEl("span",{"class":"gl-star-rating","data-star-rating":""});this.el.parentNode.insertBefore(s,this.el),s.appendChild(this.el),this.wrap=this._insertAfterEl(this.el,"span",{"class":"gl-star-rating-stars"}),this.config.showText&&(this.text=this._insertAfterEl(this.wrap,"span",{"class":"gl-star-rating-text"}));for(var r=0;r<this.el.length;r++)""!==this.el[r].value&&(e[this.el[r].value]=this.el[r].text);Object.keys(e).sort().forEach(function(s){t[s]=e[s]});for(var i in t)this._appendTo(this.wrap,"span",{"data-value":i,"data-text":t[i]})},change:function(){this.show(this.el.options[this.el.selectedIndex].value)},clear:function(t){(this.config.clearable||t!==s)&&(this.el.value="",this.selected="",this.show(0))},enter:function(){var t=this.wrap.getBoundingClientRect();this._on("mousemove",this.wrap,this.move.bind(this)),this.offsetLeft=t.left+e.body.scrollLeft},getIndexFromPosition:function(t){return Math.min(Math.ceil(Math.max(t-this.offsetLeft,1)/this.star),this.stars)},leave:function(){this._off("mousemove",this.wrap,this.move),this.show(this.selected)},move:function(t){this.show(this.getIndexFromPosition(t.pageX))},select:function(t){var e=this.current;return t!==s&&(e=this.getIndexFromPosition(t.pageX),""!==this.current&&parseFloat(this.selected)===e)?void this.clear():(this.el.value=e,this.selected=e,this.show(e),void(t!==s&&"function"==typeof this.config.onClick&&this.config.onClick(this.el)))},show:function(t){(t<0||""===t)&&(t=0),t>this.stars&&(t=this.stars),this._removeClass(this.wrap,"s"+10*this.current),this._addClass(this.wrap,"s"+10*t),this.config.showText&&(this.text.textContent=t<1?this.config.initialText:this.wrap.childNodes[t-1].dataset.text),this.current=t},_addClass:function(t,e){t.classList?t.classList.add(e):this._hasClass(t,e)||(t.className+=" "+e)},_appendTo:function(t,e,s){var r=this._createEl(e,s);t.innerHTML+=r.outerHTML},_createEl:function(t,s){var r="string"==typeof t?e.createElement(t):t;s=s||{};for(var i in s)r.setAttribute(i,s[i]);return r},_extend:function(){var t=[].slice.call(arguments),e=!1;"boolean"==typeof t[0]&&(e=t.shift());for(var s=t[0],r=t.slice(1),i=r.length,n=0;n<i;n++){var a=r[n];for(var o in a){var l=a[o];if(e&&l&&"object"==typeof l){var c=Array.isArray(l)?[]:{};s[o]=this._extend(!0,c,l)}else s[o]=l}}return s},_hasClass:function(t,e){return t.classList?t.classList.contains(e):new RegExp("\\b"+e+"\\b").test(t.className)},_insertAfterEl:function(t,e,s){var r=this._createEl(e,s);return t.parentNode.insertBefore(r,t.nextSibling),r},_off:function(t,e,s){e.detachEvent?e.detachEvent("on"+t,s):e.removeEventListener(t,s)},_on:function(t,e,s){e.attachEvent?e.attachEvent("on"+t,s):e.addEventListener(t,s)},_removeClass:function(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("\\b"+e+"\\b","g"),"")}},r.defaults=r.prototype.defaults,t.jQuery&&(jQuery.fn.starrating=function(t){return this.each(function(){jQuery.data(this,"plugin_starrating")||jQuery.data(this,"plugin_starrating",new r(this,t))})}),t.StarRating=r}(window,document),this.Element&&!function(t){t.matches=t.matches||t.matchesSelector||t.webkitMatchesSelector||t.msMatchesSelector||function(t){for(var e=this,s=(e.parentNode||e.document).querySelectorAll(t),r=-1;s[++r]&&s[r]!==e;);return!!s[r]},t.closest=t.closest||function(t){for(var e=this;e.matches&&!e.matches(t);)e=e.parentNode;return e.matches?e:null}}(Element.prototype);var GLSR={};GLSR.addClass=function(t,e){t.classList?t.classList.add(e):GLSR.hasClass(t,e)||(t.className+=" "+e)},GLSR.convertValue=function(t){if(GLSR.isNumeric(t))return parseFloat(t);if("true"===t)return!0;if("false"===t)return!1;if(""!==t&&null!==t)return t},GLSR.hasClass=function(t,e){return t.classList?t.classList.contains(e):new RegExp("\\b"+e+"\\b").test(t.className)},GLSR.inArray=function(t,e){for(var s=e.length;s--;)if(e[s]===t)return!0;return!1},GLSR.isNumeric=function(t){return!(isNaN(parseFloat(t))||!isFinite(t))},GLSR.on=function(t,e,s){[].forEach.call(document.querySelectorAll(e),function(e){e.attachEvent?e.attachEvent("on"+t,s):e.addEventListener(t,s)})},GLSR.off=function(t,e,s){[].forEach.call(document.querySelectorAll(e),function(e){e.detachEvent?e.detachEvent("on"+t,s):e.removeEventListener(t,s)})},GLSR.parseFormData=function(t,e){e=!!e||!1;for(var s=/[^\[\]]+/g,r={},i={},n=(function(t,s,r,a){var o=r.shift();if(a=a?a+"."+o:o,r.length)s[o]||(s[o]={}),n(t,s[o],r,a);else{var l=e?GLSR.convertValue(t.value):t.value;if(a in i&&"radio"!==t.type&&!s[o].isArray()?o in s?s[o]=[s[o]]:s[o]=[]:i[a]=!0,GLSR.inArray(t.type,["radio","checkbox"])&&!t.checked)return;s[o]?s[o].push(l):s[o]=l}}),a=0;a<t.length;a++){var o=t[a];if(o.name&&!o.disabled&&!GLSR.inArray(o.type,["file","reset","submit","button"])){var l=o.name.match(s);l.length||(l=[o.name]),n(o,r,l)}}return r},GLSR.postAjax=function(t,e,s){var r="string"!=typeof e?GLSR.serialize(e):e,i=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");return i.open("POST",t),i.onreadystatechange=function(){i.readyState>3&&200===i.status&&s(JSON.parse(i.responseText))},i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),i.send(r),i},GLSR.ready=function(t){"function"==typeof t&&("loading"!==document.readyState?t():document.addEventListener?document.addEventListener("DOMContentLoaded",t):document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&t()}))},GLSR.removeClass=function(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("\\b"+e+"\\b","g"),"")},GLSR.serialize=function(t,e){var s=[];for(var r in t)if(t.hasOwnProperty(r)){var i=e?e+"["+r+"]":r,n=t[r];s.push("object"==typeof n?GLSR.serialize(n,i):encodeURIComponent(i)+"="+encodeURIComponent(n))}return s.join("&")},GLSR.insertAfter=function(t,e,s){var r=GLSR.createEl(e,s);return t.parentNode.insertBefore(r,t.nextSibling),r},GLSR.appendTo=function(t,e,s){var r=GLSR.createEl(e,s);return t.appendChild(r),r},GLSR.createEl=function(t,e){var s="string"==typeof t?document.createElement(t):t;e=e||{};for(var r in e)e.hasOwnProperty(r)&&s.setAttribute(r,e[r]);return s},GLSR.clearFieldError=function(t){var e=t.closest(".glsr-field");if(null!==e){var s=e.querySelector(".glsr-field-errors");GLSR.removeClass(e,"glsr-has-error"),null!==s&&s.parentNode.removeChild(s)}},GLSR.clearFormErrors=function(t){for(var e=0;e<t.length;e++)GLSR.clearFieldError(t[e])},GLSR.showFormErrors=function(t,e){var s,r;for(var i in e)if(e.hasOwnProperty(i)){s=t.querySelector('[name="'+i+'"]').closest(".glsr-field"),r=s.querySelector(".glsr-field-errors"),GLSR.addClass(s,"glsr-has-error"),null===r&&(r=GLSR.appendTo(s,"span",{"class":"glsr-field-errors"}));for(var n=0;n<e[i].errors.length;n++)null!==e[i].errors[n]&&(r.innerHTML+='<span class="glsr-field-error">'+e[i].errors[n]+"</span>")}},GLSR.showFormMessage=function(t,e){var s=t.querySelector('input[name="form_id"]'),r=t.querySelector(".glsr-form-messages");null===r&&(r=GLSR.insertAfter(s,"div",{"class":"glsr-form-messages"})),e.errors?GLSR.addClass(r,"gslr-has-errors"):GLSR.removeClass(r,"gslr-has-errors"),r.innerHTML="<p>"+e.message+"</p>"},GLSR.submitForm=function(t){var e=t.querySelector('input[type="submit"]'),s={action:site_reviews.action,request:GLSR.parseFormData(t)};GLSR.postAjax(site_reviews.ajaxurl,s,function(s){GLSR.clearFormErrors(t),GLSR.showFormMessage(t,s),e.disabled&&e.removeAttribute("disabled"),s.errors?GLSR.showFormErrors(t,s.errors):t.reset()})},GLSR.on("change","form.glsr-submit-review-form",function(t){GLSR.clearFieldError(t.target)}),GLSR.on("submit","form.glsr-submit-review-form",function(t){t.preventDefault();var e=this.querySelector('input[type="submit"]');e.disabled||e.setAttribute("disabled",""),GLSR.submitForm(this)}),GLSR.ready(function(){for(var t=document.querySelectorAll("select.glsr-star-rating"),e=0;e<t.length;e++)new StarRating(t[e],{clearable:!1,showText:!1,onClick:GLSR.clearFieldError})});